<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Help Me Name My Cat!</title>

    <!-- Mobile-specific meta tags for better navbar experience -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">

    <!-- SEO -->
    <meta name="description"
        content="Pick the perfect cat name via a fun tournament. Save, compare, and share results.">
    <meta name="theme-color" content="#f4f7fb">

    <!-- Open Graph -->
    <meta property="og:title" content="Name Nosferatu">
    <meta property="og:description" content="Tournament-style voting for cat names.">
    <meta property="og:type" content="website">
    <meta property="og:image" content="/images/IMG_4844.jpg">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Name Nosferatu">
    <meta name="twitter:description" content="Tournament-style voting for cat names.">
  <meta name="twitter:image" content="/images/IMG_4844.jpg">

  <!-- Fonts performance -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@700&family=Josefin+Slab:wght@400;600&family=Waiting+for+the+Sunrise&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link
      href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@700&family=Josefin+Slab:wght@400;600&family=Waiting+for+the+Sunrise&display=swap"
      rel="stylesheet"></noscript>

  <!-- Black cat favicon stored as a standalone SVG asset -->
  <link rel="icon" href="/assets/images/black-cat-favicon.svg" type="image/svg+xml" />
</head>

<body>
    <script>
      (function initializeTheme() {
        try {
          const THEME_KEY = 'theme';
          const metaTheme = document.querySelector('meta[name="theme-color"]');
          const { body, documentElement } = document;

          const applyTheme = (theme) => {
            const isLight = theme === 'light';

            body.classList.toggle('light-theme', isLight);
            body.classList.toggle('dark-theme', !isLight);

            documentElement.dataset.theme = theme;
            documentElement.style.colorScheme = theme;
            body.style.colorScheme = theme;

            if (metaTheme) {
              metaTheme.setAttribute('content', isLight ? '#f4f7fb' : '#020617');
            }
          };

          const parseStoredTheme = (value) => {
            if (value === null) return null;
            if (value === 'light' || value === 'dark') {
              return value;
            }
            if (value === 'true' || value === 'false') {
              return value === 'true' ? 'light' : 'dark';
            }

            try {
              const parsed = JSON.parse(value);
              if (typeof parsed === 'boolean') {
                return parsed ? 'light' : 'dark';
              }
            } catch (error) {
              if (
                typeof process !== 'undefined' &&
                process.env &&
                process.env.NODE_ENV === 'development'
              ) {
                console.error('Error parsing stored theme value during boot:', error);
              }
            }

            return null;
          };

          const saved =
            typeof window !== 'undefined' && window.localStorage
              ? window.localStorage.getItem(THEME_KEY)
              : null;

          const resolvePreferredTheme = () => {
            const prefersDark =
              typeof window !== 'undefined' &&
              window.matchMedia &&
              window.matchMedia('(prefers-color-scheme: dark)').matches;
            if (prefersDark) {
              return 'dark';
            }

            const now = new Date();
            const hour = now.getHours();
            const minute = now.getMinutes();
            const afterSunset = hour > 18 || (hour === 18 && minute >= 30) || hour < 6;

            return afterSunset ? 'dark' : 'light';
          };

          const storedTheme = parseStoredTheme(saved);
          const themeToApply = storedTheme ?? resolvePreferredTheme();

          applyTheme(themeToApply);

          if (!storedTheme && typeof window !== 'undefined' && window.localStorage) {
            window.localStorage.setItem('theme', themeToApply);
          }
        } catch (error) {
          document.body.classList.add('light-theme');
        }
      })();
    </script>
    <div id="root"></div>
    <script type="module" src="/src/index.jsx"></script>
</body>

</html>
